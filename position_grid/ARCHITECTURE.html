<!DOCTYPE html>
<html>
<head>
<title>ARCHITECTURE.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="architecture--data-flow">Architecture &amp; Data Flow</h1>
<h2 id="system-architecture">System Architecture</h2>
<pre class="hljs"><code><div>┌─────────────────────────────────────────────────────────────┐
│                     FRONTEND (Vue 3)                        │
│                                                             │
│  ┌──────────────┐         ┌──────────────────────────┐     │
│  │   App.vue    │         │   PositionGrid.vue       │     │
│  │              │         │                          │     │
│  │ - Form State │────────▶│ - Grid Display          │     │
│  │ - Submit     │         │ - Click Handlers         │     │
│  │   Handler    │         │ - Visual States          │     │
│  └──────┬───────┘         └──────────┬───────────────┘     │
│         │                            │                     │
│         │ uses                       │ uses                │
│         ▼                            ▼                     │
│  ┌──────────────┐         ┌──────────────────────────┐     │
│  │  api.js      │         │  useBoxOccupancy.js      │     │
│  │              │         │                          │     │
│  │ - register   │         │ - fetch occupancy        │     │
│  │   Sample()   │         │ - auto-reload            │     │
│  │ - getBox     │         │ - computed gridRows      │     │
│  │   Occupancy()│         │                          │     │
│  └──────┬───────┘         └──────────┬───────────────┘     │
│         │                            │                     │
└─────────┼────────────────────────────┼─────────────────────┘
          │                            │
          │ HTTP                       │ HTTP
          │ POST /samples/             │ GET /boxes/:id/occupancy
          │                            │
┌─────────▼────────────────────────────▼─────────────────────┐
│              BACKEND (FastAPI + PostgreSQL)                │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │         routers/samples.py                          │   │
│  │                                                     │   │
│  │  POST /samples/                                     │   │
│  │  ├─ Validate position availability                  │   │
│  │  ├─ Create BioSampleDB record                       │   │
│  │  ├─ Occupy position in StoragePositionDB            │   │
│  │  └─ Emit BIOSAMPLE_REGISTERED event                 │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │      routers/attributes.py                          │   │
│  │                                                     │   │
│  │  GET /boxes/{box_id}/occupancy                      │   │
│  │  ├─ Fetch BoxDB record                              │   │
│  │  ├─ Get PositionTemplateDB (rows, columns)          │   │
│  │  ├─ Query StoragePositionDB for occupancy           │   │
│  │  └─ Return BoxOccupancy schema                      │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │              Database (PostgreSQL)                  │   │
│  │                                                     │   │
│  │  ┌────────────────┐  ┌──────────────────────────┐  │   │
│  │  │  BioSampleDB   │  │  StoragePositionDB       │  │   │
│  │  ├────────────────┤  ├──────────────────────────┤  │   │
│  │  │ uuid           │  │ site, freezer, rack, box │  │   │
│  │  │ serial_no      │  │ position (int)           │  │   │
│  │  │ label          │  │ is_occupied (bool)       │  │   │
│  │  │ storage_loc    │  │ occupied_by_sample_uuid  │  │   │
│  │  │ collection_... │  │ occupied_at              │  │   │
│  │  └────────────────┘  └──────────────────────────┘  │   │
│  │                                                     │   │
│  │  ┌────────────────┐  ┌──────────────────────────┐  │   │
│  │  │  BoxDB         │  │  PositionTemplateDB      │  │   │
│  │  ├────────────────┤  ├──────────────────────────┤  │   │
│  │  │ box_id         │  │ template_id              │  │   │
│  │  │ box_name       │  │ rows                     │  │   │
│  │  │ rack_id        │  │ columns                  │  │   │
│  │  │ template_id ───┼──▶ total_positions          │  │   │
│  │  │ site, freezer  │  │ label_format             │  │   │
│  │  └────────────────┘  └──────────────────────────┘  │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
</div></code></pre>
<hr>
<h2 id="data-flow-sample-registration">Data Flow: Sample Registration</h2>
<pre class="hljs"><code><div>┌──────────┐
│  USER    │
│  CLICKS  │
│ Position │
│   &quot;A5&quot;   │
└────┬─────┘
     │
     ▼
┌─────────────────────────────────────┐
│  PositionGrid.vue                   │
│  @click=&quot;emit('select', 'A5')&quot;      │
└────┬────────────────────────────────┘
     │
     ▼
┌─────────────────────────────────────┐
│  App.vue                            │
│  handleSelect('A5')                 │
│  → selectedPosition.value = 'A5'    │
└─────────────────────────────────────┘
     │
     │ USER FILLS FORM &amp; CLICKS SUBMIT
     ▼
┌─────────────────────────────────────┐
│  App.vue - submitSample()           │
│                                     │
│  1. Validate form                   │
│  2. Convert &quot;A5&quot; → index (5)        │
│  3. Build payload:                  │
│     {                               │
│       sample_serial_no: &quot;...&quot;,      │
│       storage_location: {           │
│         box: &quot;BOX_001&quot;,             │
│         position: 5                 │
│       },                            │
│       ...                           │
│     }                               │
└────┬────────────────────────────────┘
     │
     ▼
┌─────────────────────────────────────┐
│  api.js - registerSample()          │
│                                     │
│  fetch(POST /samples/, {            │
│    headers: {                       │
│      Authorization: Bearer &lt;token&gt;  │
│    },                               │
│    body: JSON.stringify(payload)    │
│  })                                 │
└────┬────────────────────────────────┘
     │
     │ HTTP REQUEST
     ▼
┌─────────────────────────────────────┐
│  Backend - routers/samples.py       │
│  register_sample(...)               │
│                                     │
│  1. Validate auth token             │
│  2. Check position available        │
│     storage_manager.validate_...()  │
│  3. Create BioSampleDB record       │
│  4. Commit to database              │
│  5. Occupy position                 │
│     storage_manager.occupy_...()    │
│  6. Emit audit event                │
│  7. Return BioSample response       │
└────┬────────────────────────────────┘
     │
     │ 201 CREATED
     ▼
┌─────────────────────────────────────┐
│  App.vue - Success Handler          │
│                                     │
│  1. Set submitSuccess = true        │
│  2. Reset form                      │
│  3. Clear selected position         │
│  4. Call reload() to refresh grid   │
│  5. Show success message 3s         │
└─────────────────────────────────────┘
     │
     ▼
┌─────────────────────────────────────┐
│  useBoxOccupancy - reload()         │
│                                     │
│  GET /boxes/BOX_001/occupancy       │
│  → Updates occupancy array          │
│  → Position &quot;A5&quot; now shows gray     │
└─────────────────────────────────────┘
</div></code></pre>
<hr>
<h2 id="position-index-calculation">Position Index Calculation</h2>
<h3 id="visual-example-10%C3%9710-grid">Visual Example: 10×10 Grid</h3>
<pre class="hljs"><code><div>     1   2   3   4   5   6   7   8   9  10
   ┌───┬───┬───┬───┬───┬───┬───┬───┬───┬───┐
 A │ 0 │ 1 │ 2 │ 3 │ 4 │ 5 │ 6 │ 7 │ 8 │ 9 │
   ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
 B │10 │11 │12 │13 │14 │15 │16 │17 │18 │19 │
   ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
 C │20 │21 │22 │23 │24 │25 │26 │27 │28 │29 │
   ├───┼───┼───┼───┼───┼───┼───┼───┼───┼───┤
 D │30 │31 │32 │33 │34 │35 │36 │37 │38 │39 │
   └───┴───┴───┴───┴───┴───┴───┴───┴───┴───┘
</div></code></pre>
<p><strong>Examples:</strong></p>
<ul>
<li><code>A1</code> → <code>(0 × 10) + 0 = 0</code></li>
<li><code>A5</code> → <code>(0 × 10) + 4 = 4</code></li>
<li><code>B1</code> → <code>(1 × 10) + 0 = 10</code></li>
<li><code>B5</code> → <code>(1 × 10) + 4 = 14</code></li>
<li><code>C3</code> → <code>(2 × 10) + 2 = 22</code></li>
</ul>
<p><strong>Code:</strong></p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> getPositionIndex = <span class="hljs-function">(<span class="hljs-params">label, cols</span>) =&gt;</span> {
  <span class="hljs-keyword">const</span> row = label.charCodeAt(<span class="hljs-number">0</span>) - <span class="hljs-number">65</span>  <span class="hljs-comment">// A=0, B=1, C=2...</span>
  <span class="hljs-keyword">const</span> col = <span class="hljs-built_in">parseInt</span>(label.slice(<span class="hljs-number">1</span>)) - <span class="hljs-number">1</span>  <span class="hljs-comment">// 1→0, 2→1, 3→2...</span>
  <span class="hljs-keyword">return</span> (row * cols) + col
}
</div></code></pre>
<hr>
<h2 id="component-communication">Component Communication</h2>
<pre class="hljs"><code><div>App.vue
  │
  ├─ props ──────────▶ PositionGrid
  │   boxId=&quot;BOX_001&quot;
  │
  ├─ @select ◀─────── PositionGrid
  │   emit('select', 'A5')
  │
  ├─ uses ──────────▶ useBoxOccupancy
  │   const { reload, columns } = useBoxOccupancy(boxId)
  │
  └─ uses ──────────▶ api.registerSample()
      await registerSample(payload)
</div></code></pre>
<hr>
<h2 id="state-management">State Management</h2>
<h3 id="appvue-state">App.vue State</h3>
<table>
<thead>
<tr>
<th>State</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>boxId</code></td>
<td>Ref<string></td>
<td>Current box ID</td>
</tr>
<tr>
<td><code>selectedPosition</code></td>
<td>Ref&lt;string?&gt;</td>
<td>User-selected position (e.g., &quot;A5&quot;)</td>
</tr>
<tr>
<td><code>siteId</code>, <code>freezerId</code>, <code>rackId</code></td>
<td>Ref<string></td>
<td>Storage hierarchy IDs</td>
</tr>
<tr>
<td><code>sampleForm</code></td>
<td>Ref<object></td>
<td>Form field values</td>
</tr>
<tr>
<td><code>submitting</code></td>
<td>Ref<boolean></td>
<td>Submit loading state</td>
</tr>
<tr>
<td><code>submitError</code></td>
<td>Ref&lt;string?&gt;</td>
<td>Error message</td>
</tr>
<tr>
<td><code>submitSuccess</code></td>
<td>Ref<boolean></td>
<td>Success flag</td>
</tr>
</tbody>
</table>
<h3 id="useboxoccupancy-state">useBoxOccupancy State</h3>
<table>
<thead>
<tr>
<th>State</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>loading</code></td>
<td>Ref<boolean></td>
<td>Fetch loading state</td>
</tr>
<tr>
<td><code>error</code></td>
<td>Ref&lt;string?&gt;</td>
<td>Fetch error message</td>
</tr>
<tr>
<td><code>rows</code></td>
<td>Ref<number></td>
<td>Grid row count</td>
</tr>
<tr>
<td><code>columns</code></td>
<td>Ref<number></td>
<td>Grid column count</td>
</tr>
<tr>
<td><code>occupancy</code></td>
<td>Ref&lt;number[]&gt;</td>
<td>Array of 0/1 (available/occupied)</td>
</tr>
<tr>
<td><code>positions</code></td>
<td>Ref&lt;string[]&gt;</td>
<td>Position labels [&quot;A1&quot;, &quot;A2&quot;, ...]</td>
</tr>
<tr>
<td><code>occupiedPositions</code></td>
<td>Ref<object></td>
<td>Map: position → sample UUID</td>
</tr>
<tr>
<td><code>gridRows</code></td>
<td>ComputedRef</td>
<td>2D array of positions by row</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="api-response-schemas">API Response Schemas</h2>
<h3 id="boxoccupancy-response">BoxOccupancy Response</h3>
<pre class="hljs"><code><div>{
  box_id: <span class="hljs-built_in">string</span>
  box_name: <span class="hljs-built_in">string</span>
  site_id: <span class="hljs-built_in">string</span>
  freezer_id: <span class="hljs-built_in">string</span>
  rack_id: <span class="hljs-built_in">string</span>
  template: {
    template_id: <span class="hljs-built_in">string</span>
    rows: <span class="hljs-built_in">number</span>
    columns: <span class="hljs-built_in">number</span>
    total_positions: <span class="hljs-built_in">number</span>
  }
  statistics: {
    total_positions: <span class="hljs-built_in">number</span>
    occupied: <span class="hljs-built_in">number</span>
    available: <span class="hljs-built_in">number</span>
    utilization_percentage: <span class="hljs-built_in">number</span>
  }
  positions: <span class="hljs-built_in">string</span>[]              <span class="hljs-comment">// ["A1", "A2", ...]</span>
  occupancy: <span class="hljs-built_in">number</span>[]              <span class="hljs-comment">// [1, 0, 1, ...] parallel to positions</span>
  occupied_positions: {
    [position: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span>     <span class="hljs-comment">// position → sample UUID</span>
  }
}
</div></code></pre>
<h3 id="biosample-response">BioSample Response</h3>
<pre class="hljs"><code><div>{
  uuid: <span class="hljs-built_in">string</span>
  site_id: <span class="hljs-built_in">string</span>
  sample_category_id: <span class="hljs-built_in">string</span>
  sample_serial_no: <span class="hljs-built_in">string</span>
  sample_label: <span class="hljs-built_in">string</span>
  storage_location: {
    site: <span class="hljs-built_in">string</span>
    freezer: <span class="hljs-built_in">string</span>
    rack: <span class="hljs-built_in">string</span>
    box: <span class="hljs-built_in">string</span>
    position: <span class="hljs-built_in">number</span>
  }
  collection_date: <span class="hljs-built_in">string</span>          <span class="hljs-comment">// YYYY-MM-DD</span>
  collection_time: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>   <span class="hljs-comment">// HH:MM:SS</span>
  researcher_info: <span class="hljs-built_in">string</span>
  field_collector_info: <span class="hljs-built_in">string</span>
  barcode_qr_code: <span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span>
  system_date_time: <span class="hljs-built_in">string</span>         <span class="hljs-comment">// ISO 8601</span>
  status: <span class="hljs-built_in">string</span>
  free_fields: object | <span class="hljs-literal">null</span>
}
</div></code></pre>
<hr>
<h2 id="error-handling-flow">Error Handling Flow</h2>
<pre class="hljs"><code><div>User Action
    │
    ▼
Form Validation ──────────────▶ Error Display
    │ invalid                   (Red alert box)
    │
    ▼ valid
API Request
    │
    ├─▶ Network Error ─────────▶ Error Display
    │                            &quot;Failed to connect&quot;
    │
    ├─▶ 401 Unauthorized ──────▶ Error Display
    │                            &quot;Invalid token&quot;
    │
    ├─▶ 400 Bad Request ───────▶ Error Display
    │                            &quot;Position not available&quot;
    │
    └─▶ 201 Created ───────────▶ Success Display
                                 (Green alert box)
                                 + Grid Refresh
                                 + Form Reset
</div></code></pre>
<hr>
<h2 id="security-considerations">Security Considerations</h2>
<ol>
<li><strong>JWT Authentication</strong>: All API requests require valid Bearer token</li>
<li><strong>Position Validation</strong>: Backend validates position availability before storage</li>
<li><strong>Database Constraints</strong>: Unique constraints on serial numbers and barcodes</li>
<li><strong>Audit Trail</strong>: BIOSAMPLE_REGISTERED events logged for compliance</li>
<li><strong>Input Sanitization</strong>: Form inputs validated on both client and server</li>
</ol>
<hr>
<h2 id="performance-optimizations">Performance Optimizations</h2>
<ol>
<li><strong>Auto-reload</strong>: Grid refreshes only after successful registration</li>
<li><strong>Computed Properties</strong>: <code>gridRows</code> computed once per occupancy change</li>
<li><strong>Reactive Watchers</strong>: <code>useBoxOccupancy</code> auto-fetches on boxId change</li>
<li><strong>Parallel API Calls</strong>: Can fetch multiple boxes simultaneously</li>
<li><strong>Local State</strong>: Form state kept in component (no global store needed)</li>
</ol>
<hr>
<h2 id="extension-points">Extension Points</h2>
<h3 id="add-more-storage-hierarchy-selectors">Add More Storage Hierarchy Selectors</h3>
<pre class="hljs"><code><div>&lt;!-- In App.vue --&gt;
&lt;select v-model=&quot;siteId&quot;&gt;
  &lt;option v-for=&quot;site in sites&quot; :value=&quot;site.site_id&quot;&gt;
    {{ site.site_name }}
  &lt;/option&gt;
&lt;/select&gt;
</div></code></pre>
<h3 id="add-barcode-scanner">Add Barcode Scanner</h3>
<pre class="hljs"><code><div>&lt;!-- In App.vue --&gt;
&lt;input
  v-model=&quot;sampleForm.barcodeQrCode&quot;
  @input=&quot;handleBarcodeInput&quot;
  placeholder=&quot;Scan barcode...&quot;
/&gt;
</div></code></pre>
<h3 id="add-sample-search">Add Sample Search</h3>
<pre class="hljs"><code><div><span class="hljs-comment">// In api.js</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> searchSamples = <span class="hljs-keyword">async</span> (query) =&gt; {
  <span class="hljs-keyword">return</span> apiRequest(<span class="hljs-string">`/samples/?search=<span class="hljs-subst">${query}</span>`</span>)
}
</div></code></pre>
<hr>
<p>For implementation details, see:</p>
<ul>
<li><a href="README_INTEGRATION.md">README_INTEGRATION.md</a> - Full documentation</li>
<li><a href="QUICK_START.md">QUICK_START.md</a> - Quick setup guide</li>
</ul>

</body>
</html>
